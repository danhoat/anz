(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,o=window.wp.blocks,l=window.wp.components,n=window.wp.i18n,s=window.wp.blockEditor,r=1,a=100;function c(e){var o;let{numberOfItems:s,order:c,orderBy:d,offset:i,ignoreStickyPosts:p,maxItems:u=a,minItems:m=r,showAllPosts:g,postType:b,onNumberOfItemsChange:h,onOrderChange:y,onOrderByChange:C,onOffsetChange:v,onIgnoreStickyPostsChange:_,onshowAllPostsChange:k}=e;const w=[{label:(0,n.__)("Date","advanced-posts-blocks"),value:"date"},{label:(0,n.__)("Title","advanced-posts-blocks"),value:"title"}];return[C&&(0,t.createElement)(l.SelectControl,{key:"query-controls-order-by-select",label:(0,n.__)("Order by","advanced-posts-blocks"),value:d,options:null!=b&&null!==(o=b.supports)&&void 0!==o&&o["page-attributes"]?[...w,{label:(0,n.__)("Page Order","advanced-posts-blocks"),value:"menu_order"}]:w,onChange:e=>{e!==d&&C(e)}}),y&&(0,t.createElement)(l.SelectControl,{key:"query-controls-order-select",label:(0,n.__)("Order","advanced-posts-blocks"),value:c,options:[{label:(0,n.__)("DESC","advanced-posts-blocks"),value:"desc"},{label:(0,n.__)("ASC","advanced-posts-blocks"),value:"asc"}],onChange:e=>{e!==c&&y(e)}}),!g&&h&&(0,t.createElement)(l.RangeControl,{key:"query-controls-range-control",label:(0,n.__)("Number of items","advanced-posts-blocks"),value:s,onChange:h,min:m,max:u}),_&&(0,t.createElement)(l.CheckboxControl,{key:"query-controls-nopaging-control",label:(0,n.__)("Show all posts","advanced-posts-blocks"),checked:g,onChange:k}),v&&(0,t.createElement)(l.RangeControl,{key:"query-controls-offset-control",label:(0,n.__)("Offset","advanced-posts-blocks"),value:i,onChange:v,min:0,max:u}),_&&(0,t.createElement)(l.CheckboxControl,{key:"query-controls-ignore-sticky-posts-control",label:(0,n.__)("Ignore sticky posts","advanced-posts-blocks"),checked:p,onChange:_})]}const d=window.lodash,i=window.wp.data,p=e=>{let{onChange:o,value:s,filter:r=(()=>!0)}=e;const a=(0,i.useSelect)((e=>e("core").getPostTypes({per_page:-1})||[]),[]).filter((e=>!["attachment","wp_block"].includes(e.slug))).filter(r);return(0,t.createElement)(l.SelectControl,{label:(0,n.__)("Post Type","advanced-posts-blocks"),value:s.slug,options:a.map((e=>({label:e.name,value:e.slug}))),onChange:e=>{const t=a.find((t=>t.slug===e));o(t)}})},u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"advanced-posts-blocks/children","apiVersion":2,"title":"Child Posts","description":"Display children of selected post.","icon":"admin-page","textdomain":"advanced-posts-blocks","attributes":{"align":{"type":"string","enum":["center","wide","full"]},"postType":{"type":"string","default":"page"},"postId":{"type":"number","default":0},"postsToShow":{"type":"number","default":-1},"order":{"type":"string","default":"asc"},"orderBy":{"type":"string","default":"title"}},"supports":{"align":["center","wide","full"],"html":false},"category":"widgets","editorScript":"file:./index.js"}'),m=e=>e.flatMap((e=>e?e.split(" "):[])),g=window.wp.serverSideRender;var b=e.n(g);function h(e){let{title:o,children:n}=e;return(0,t.createElement)(l.Placeholder,{label:o},n)}const y=(0,t.memo)((e=>{let{name:o,attributes:n,title:s,emptyResponseLabel:r}=e;return(0,t.createElement)(b(),{block:o,attributes:n,LoadingResponsePlaceholder:()=>(0,t.createElement)(h,null,(0,t.createElement)(l.Spinner,null)),EmptyResponsePlaceholder:()=>(0,t.createElement)(h,{title:s},r)})})),C=y,{name:v,title:_}=u,{name:k,supports:w,category:f}=u,L=(0,n.__)("Child Posts","advanced-posts-blocks");(0,o.registerBlockType)(k,{supports:w,category:f,title:`${L} (Advanced Posts Blocks)`,description:(0,n.__)("Display children of selected post.","advanced-posts-blocks"),keywords:["child posts","children",(0,n.__)("children posts","advanced-posts-blocks")],icon:(0,t.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,t.createElement)(l.Path,{d:"M19,15 C20.1045695,15 21,15.8954305 21,17 L21,19 C21,20.1045695 20.1045695,21 19,21 L17,21 C15.8954305,21 15,20.1045695 15,19 L15,17 C15,15.8954305 15.8954305,15 17,15 L17,13 L7,13 L7,15 C8.1045695,15 9,15.8954305 9,17 L9,19 C9,20.1045695 8.1045695,21 7,21 L5,21 C3.8954305,21 3,20.1045695 3,19 L3,17 C3,15.8954305 3.8954305,15 5,15 L5,13 C5,11.8954305 5.8954305,11 7,11 L11,11 L11,9 C9.8954305,9 9,8.1045695 9,7 L9,5 C9,3.8954305 9.8954305,3 11,3 L13,3 C14.1045695,3 15,3.8954305 15,5 L15,7 C15,8.1045695 14.1045695,9 13,9 L13,11 L17,11 C18.1045695,11 19,11.8954305 19,13 L19,15 Z M5,17 L5,19 L7,19 L7,17 L5,17 Z M17,17 L17,19 L19,19 L19,17 L17,17 Z M11,5 L11,7 L13,7 L13,5 L11,5 Z"})),edit:e=>{let{attributes:r,setAttributes:a}=e;const{postId:g,postsToShow:b,order:h,orderBy:y,postType:k,className:w}=r,f=(0,i.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),L=(E=k||f,(0,i.useSelect)((e=>e("core").getPostType(E)||{}),[E]));var E;const P=((e,t)=>(0,i.useSelect)((o=>""===t.search?[]:o("core").getEntityRecords("postType",e.slug,t)||[]),[e.slug,t]))(L,{orderby:y,per_page:-1}),S=L.labels||{},O=function(e){const t=e.map((e=>({children:[],parent:0,...e}))),o=(0,d.groupBy)(t,"parent");if(o.null&&o.null.length)return t;const l=e=>e.map((e=>{const t=o[e.id];return{...e,children:t&&t.length?l(t):[]}}));return l(o[0]||[])}(P.map((e=>({id:e.id,parent:e.parent,name:e.title.raw?e.title.raw:`#${e.id} ${(0,n.__)("(no title)","advanced-posts-blocks")}`})))),T=e=>e.map((e=>e.children.length>0?{...e,children:T(e.children)}:null)).filter((e=>e)),B=(0,t.createElement)(l.TreeSelect,{label:S.parent_item_colon,noOptionLabel:`${(0,n.__)("(This Page)","advanced-posts-blocks")}`,tree:T(O),selectedId:g,onChange:e=>{a({postId:e?parseInt(e):void 0})}}),I=(0,t.createElement)(s.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:(0,n.__)("Query setting","advanced-posts-blocks")},(0,t.createElement)(p,{value:L,filter:e=>{let{supports:t}=e;return t["page-attributes"]},onChange:e=>{a({postType:e.slug}),null!=e&&e.supports["page-attributes"]||"menu_order"!==y||a({orderBy:u.attributes.orderBy.default})}}),B,(0,t.createElement)(c,{postType:L,showAllPosts:!0,order:h,orderBy:y,numberOfItems:b,onOrderChange:e=>a({order:e}),onOrderByChange:e=>a({orderBy:e}),onNumberOfItemsChange:e=>a({postsToShow:e})}))),x=(0,o.getBlockDefaultClassName)(v),N=function(e){const t=m(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]),{className:o}=e,l=o?o.split(" "):[];return{...e,className:l.filter((e=>!t.includes(e))).join(" ")}}((0,s.useBlockProps)(),[x,w]);return(0,t.createElement)("div",N,I,(0,t.createElement)(l.Disabled,null,(0,t.createElement)(C,{name:v,attributes:r,title:_,emptyResponseLabel:S.not_found})))},save:()=>null})})();