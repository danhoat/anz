(()=>{"use strict";var e,t={655:()=>{const e=window.wp.blocks,t=window.wp.element,o=(window.React,window.wp.blockEditor),r=e=>{const{imageId:r,imageUrl:n,content:a,setImageId:c,setImageUrl:s,setContent:u}=e;return(0,t.createElement)("div",{className:"qms4__block__user-voice__inner"},(0,t.createElement)("div",{className:"qms4__block__user-voice__column-left"},(0,t.createElement)("div",{className:"qms4__block__user-voice__image-frame"},(0,t.createElement)(o.MediaUploadCheck,null,(0,t.createElement)(o.MediaUpload,{onSelect:e=>{c(e.id),s(e.url)},allowedTypes:["image"],value:r,render:e=>{let{open:o}=e;return(0,t.createElement)(l,{open:o,imageId:r,imageUrl:n})}})),0!=r&&(0,t.createElement)(o.MediaUploadCheck,null,(0,t.createElement)("button",{className:"qms4__block__user-voice__remove-image",onClick:()=>{c(0),s("")},title:"リセット","aria-label":"リセット"},"×")))),(0,t.createElement)("div",{className:"qms4__block__user-voice__column-right"},(0,t.createElement)(o.RichText,{className:"qms4__block__user-voice__content",tagName:"p",value:a,onChange:u,placeholder:"テキストを入力"})))},l=e=>{const{open:o,imageId:r,imageUrl:l}=e;return 0==r?(0,t.createElement)("button",{className:"qms4__block__user-voice__button-select",onClick:o},(0,t.createElement)("div",{className:" button button-large qms4__block__user-voice__button-select__inner "},"画像を選択")):(0,t.createElement)("button",{className:" qms4__block__user-voice__button-select qms4__block__user-voice__button-select--selected ",onClick:o},(0,t.createElement)("img",{src:l,alt:""}))},n=window.wp.components,a=e=>{const{youtubeId:r,youtubeUrl:l,content:n,setYoutubeId:a,setYoutubeUrl:s,setContent:u}=e;return(0,t.createElement)("div",{className:"qms4__block__user-voice__inner"},(0,t.createElement)("div",{className:"qms4__block__user-voice__column-left"},(0,t.createElement)(c,{youtubeId:r,youtubeUrl:l,setYoutubeId:a,setYoutubeUrl:s})),(0,t.createElement)("div",{className:"qms4__block__user-voice__column-right"},(0,t.createElement)(o.RichText,{className:"qms4__block__user-voice__content",tagName:"p",value:n,onChange:u,placeholder:"テキストを入力"})))},c=e=>{const{youtubeId:o,youtubeUrl:r,setYoutubeId:l,setYoutubeUrl:a}=e;return o?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("iframe",{src:`https://www.youtube.com/embed/${o}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"}),(0,t.createElement)(n.Button,{onClick:()=>l(null)},"リセット")):(0,t.createElement)("div",{className:"qms4__block__user-voice__youtube-frame"},(0,t.createElement)(n.TextControl,{className:"qms4__block__user-voice__youtube-frame__inner",label:"YouTube URL を入力",value:r,onChange:e=>{const t=function(e){let t;return t=e.match(/\?.*?v=(?<id>[a-zA-Z0-9_\-]+)/u),t&&t.groups&&t.groups.id?t.groups.id:(t=e.match(/\/youtu\.be\/(?<id>[a-zA-Z0-9_\-]+)/u),t&&t.groups&&t.groups.id?t.groups.id:(t=e.match(/\/embed\/(?<id>[a-zA-Z0-9_\-]+)/u),t&&t.groups&&t.groups.id?t.groups.id:null))}(e);null!=t||l(t),a(e)}}))},s=e=>{const{content:r,setContent:l}=e;return(0,t.createElement)("div",{className:"qms4__block__user-voice__inner"},(0,t.createElement)(o.RichText,{className:"qms4__block__user-voice__content",tagName:"p",value:r,onChange:l,placeholder:"テキストを入力"}))};(0,e.registerBlockType)("qms4/user-voice",{edit:function(e){let{attributes:l,setAttributes:n}=e;const{title:c,layout:u,imageId:i,imageUrl:m,youtubeId:_,youtubeUrl:b,content:d}=l,v=(0,o.useBlockProps)({className:`qms4__block__user-voice qms4__block__user-voice--layout-${u}`});return(0,t.createElement)("div",v,(0,t.createElement)(o.RichText,{className:"qms4__block__user-voice__title",tagName:"h2",value:c,onChange:e=>n({title:e}),placeholder:"タイトルを入力"}),(()=>{switch(u){case"image":return(0,t.createElement)(r,{imageId:i,imageUrl:m,content:d,setImageId:e=>n({imageId:e}),setImageUrl:e=>n({imageUrl:e}),setContent:e=>n({content:e})});case"youtube":return(0,t.createElement)(a,{youtubeId:_,youtubeUrl:b,content:d,setYoutubeId:e=>n({youtubeId:e}),setYoutubeUrl:e=>n({youtubeUrl:e}),setContent:e=>n({content:e})});default:return(0,t.createElement)(s,{content:d,setContent:e=>n({content:e})})}})())},save:function(){return null}}),(0,e.registerBlockVariation)("qms4/user-voice",[{name:"qms4/user-voice/image",title:"お客様の声(写真+テキスト)",attributes:{layout:"image"},example:{title:"お客様の声",imageId:0,imageUrl:"",content:"テキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト"},scope:["transform"]},{name:"qms4/user-voice/youtube",title:"お客様の声(YouTube+テキスト)",attributes:{layout:"youtube"},example:{title:"お客様の声",youtubeId:"jNQXAC9IVRw",youtubeUrl:"https://youtu.be/jNQXAC9IVRw",content:"テキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト"},scope:["transform"]},{name:"qms4/user-voice/none",title:"お客様の声(テキストのみ)",attributes:{layout:"none"},example:{title:"お客様の声",content:"テキストテキストテキストテキストテキストテキストテキストテキストテキストテキストテキスト"},scope:["transform"]}])}},o={};function r(e){var l=o[e];if(void 0!==l)return l.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,o,l,n)=>{if(!o){var a=1/0;for(i=0;i<e.length;i++){o=e[i][0],l=e[i][1],n=e[i][2];for(var c=!0,s=0;s<o.length;s++)(!1&n||a>=n)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(c=!1,n<a&&(a=n));if(c){e.splice(i--,1);var u=l();void 0!==u&&(t=u)}}return t}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[o,l,n]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={958:0,772:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var l,n,a=o[0],c=o[1],s=o[2],u=0;if(a.some((t=>0!==e[t]))){for(l in c)r.o(c,l)&&(r.m[l]=c[l]);if(s)var i=s(r)}for(t&&t(o);u<a.length;u++)n=a[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(i)},o=self.webpackChunkqms4=self.webpackChunkqms4||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var l=r.O(void 0,[772],(()=>r(655)));l=r.O(l)})();