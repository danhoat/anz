dev.note
add version to file index.
plugins/qms4/blocks/build/timetable/index.asset.php

add version to view.js in frontend load.
qms4/blocks/build/timetable/view.asset.php

Load file js for block : plugins/qms4/blocks/build/timetable/index.js


Removerow: removeRow
Json define:
plugins/qms4/blocks/build/timetable/block.json
json load:
{
  "$schema": "https://raw.githubusercontent.com/WordPress/gutenberg/trunk/schemas/json/block.json",
  "apiVersion": 2,
  "name": "qms4/timetable",
  "version": "0.1.0",
  "title": "タイムテーブル",
  "category": "text",
  "icon": "pets",
  "supports": {
    "html": false
  },
  "textdomain": "qms4",
  "editorScript": "file:./index.js",
  "editorStyle": "file:./index.css",
  "style": "file:./style-index.css",
  "viewScript": "file:./view.js"
}


#1 demo view: https://www.corridor-court.com/fair/detail.php?id=2337

ưpw block.js /Applications/MAMP/htdocs/tut/wp-includes/js/dist/block-editor.jsdateTime

__experimentalPublishDateTimePicker


Task2: Calendar
Render calendar: lugins\qms4\lib\Block\EventCalendar.php
Template 1 date show: plugins\qms4\blocks\templates\event-calendar__show_posts__false.php
Câu hỏi: nếu event đầu tiên của ngày A không có set color => sẽ lấy color của ngày tiếp theo hay là để mặc định.


Add new file:qms4\functions\qms4_taxonomy.php
define new method:  qms4_get_color  để get mã color của từng category.
Step2:
mở file qms4\blocks\templates\event-calendar__show_posts__false.php => gọi hàm qms4_get_color và xuất ra css  inline trong file này.

Task2: đổi bằng css trong theme - có sẵn.
define( 'WP_HOME', 'http://dev.roseun-charme.local' );
define( 'WP_SITEURL', 'http://dev.roseun-charme.local' );

Task 5: 

fabric/template-parts/event/start_content_after.php

list categpories

 qms4_site_part( 4025 ) ?>

Add new file:qms4\functions\qms4_taxonomy.php
define new method:  qms4_get_color  để get mã color của từng category.
Step2:
mở file qms4\blocks\templates\event-calendar__show_posts__false.php => gọi hàm qms4_get_color và xuất ra css  inline trong file này.






Task 6:

register_rest_route(
			'qms4/v1',
			'/admin-url/',
			array(
				'methods' => 'GET',
				'callback' => array( $this, 'get' ),
				'permission_callback' => array( $this, 'permission' ),
			)
		);




Add new file:qms4\functions\qms4_taxonomy.php
define new method:  qms4_get_color  để get mã color của từng category.
Step2:
mở file qms4\blocks\templates\event-calendar__show_posts__false.php => gọi hàm qms4_get_color và xuất ra css  inline trong file này.

xem chi tiết: plugins\qms4\lib\Action\RestApi\RegisterEventCalendarRoute.php

Custom code: qms4\lib\Action\RestApi\RegisterEventCalendarRoute.php
Custom code: qms4\lib\Block\EventCalendar.php

Thay đổi lại giá trị trong method:  DateClassFormatterFactory

Task 3: ac_notice_dismiss_activation
kiểm tra 1 activation => có thêm field color hay không
keyword: _acf_validation   acf_validation


qms4\lib\Action\Columns\DisplayColumnTermColor.php

DisplayColumnTermColor

$color = TermColor::get_post_meta( $term_id );


chmod -R 777 /var/www/laravel-api/storage/logs/laravel.log


uploads/qms_logger/user_action_2023-03.log

// run fix
wp-content % chmod -R 777 /Applications/XAMPP/xamppfiles/htdocs/roseun-charme.jp/
// fix done.

param.set('style',$unit.attr('data-set-style')); 

param.style để phân biết 1 month hay 2 months.

task 6: Tarkhe-blocks-pro/block-parts/page_list.php


$meta_query = array(
      array(
        'key' => ParentEventId::KEY,
        'value' => $parent_ids,
        'compare' => 'IN',
      ),
      array(
        'key' => EventDate::KEY,
        'value' => $start->format( 'Y-m-d' ),
        'compare' => '>=',
        'type' => 'DATE',
      ),
      array(
        'key' => EventDate::KEY,
        'value' => $end->format( 'Y-m-d' ),
        'compare' => '<=',
        'type' => 'DATE',
      ),
    );

    fetch 3 => 3=>4.
    fetch 5: =. 5 6

    $tz = wp_timezone();

    $post_date = new \DateTimeImmutable( $this->_wp_post->post_date, $tz );

    $now = new \DateTimeImmutable( 'now', $tz );