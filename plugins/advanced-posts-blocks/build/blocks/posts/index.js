(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,o=window.wp.blocks,l=window.wp.components,s=window.wp.i18n,n=window.wp.blockEditor,a=1,r=100;function c(e){var o;let{numberOfItems:n,order:c,orderBy:d,offset:i,ignoreStickyPosts:p,maxItems:u=r,minItems:m=a,showAllPosts:g,postType:b,onNumberOfItemsChange:y,onOrderChange:h,onOrderByChange:v,onOffsetChange:f,onIgnoreStickyPostsChange:k,onshowAllPostsChange:w}=e;const _=[{label:(0,s.__)("Date","advanced-posts-blocks"),value:"date"},{label:(0,s.__)("Title","advanced-posts-blocks"),value:"title"}];return[v&&(0,t.createElement)(l.SelectControl,{key:"query-controls-order-by-select",label:(0,s.__)("Order by","advanced-posts-blocks"),value:d,options:null!=b&&null!==(o=b.supports)&&void 0!==o&&o["page-attributes"]?[..._,{label:(0,s.__)("Page Order","advanced-posts-blocks"),value:"menu_order"}]:_,onChange:e=>{e!==d&&v(e)}}),h&&(0,t.createElement)(l.SelectControl,{key:"query-controls-order-select",label:(0,s.__)("Order","advanced-posts-blocks"),value:c,options:[{label:(0,s.__)("DESC","advanced-posts-blocks"),value:"desc"},{label:(0,s.__)("ASC","advanced-posts-blocks"),value:"asc"}],onChange:e=>{e!==c&&h(e)}}),!g&&y&&(0,t.createElement)(l.RangeControl,{key:"query-controls-range-control",label:(0,s.__)("Number of items","advanced-posts-blocks"),value:n,onChange:y,min:m,max:u}),k&&(0,t.createElement)(l.CheckboxControl,{key:"query-controls-nopaging-control",label:(0,s.__)("Show all posts","advanced-posts-blocks"),checked:g,onChange:w}),f&&(0,t.createElement)(l.RangeControl,{key:"query-controls-offset-control",label:(0,s.__)("Offset","advanced-posts-blocks"),value:i,onChange:f,min:0,max:u}),k&&(0,t.createElement)(l.CheckboxControl,{key:"query-controls-ignore-sticky-posts-control",label:(0,s.__)("Ignore sticky posts","advanced-posts-blocks"),checked:p,onChange:k})]}const d=window.wp.data,i=e=>{let{onChange:o,value:n,filter:a=(()=>!0)}=e;const r=(0,d.useSelect)((e=>e("core").getPostTypes({per_page:-1})||[]),[]).filter((e=>!["attachment","wp_block"].includes(e.slug))).filter(a);return(0,t.createElement)(l.SelectControl,{label:(0,s.__)("Post Type","advanced-posts-blocks"),value:n.slug,options:r.map((e=>({label:e.name,value:e.slug}))),onChange:e=>{const t=r.find((t=>t.slug===e));o(t)}})},p=e=>{var o;let{taxonomy:s,termIds:n,handleChange:a}=e;const r=(null!==(o=(0,d.useSelect)((e=>e("core").getEntityRecords("taxonomy",s.slug,{per_page:-1})),[s]))&&void 0!==o?o:[]).flatMap((e=>[{id:e.id,name:e.name},{id:-1*e.id,name:`- ${e.name}`}])),c=r.reduce(((e,t)=>({...e,[t.id]:t})),{}),i=r.reduce(((e,t)=>({...e,[t.name]:t})),{});return r&&r.length>0?(0,t.createElement)(l.FormTokenField,{key:s.rest_base,label:s.labels.name,value:n.map((e=>c[e].name)),suggestions:r.map((e=>e.name)),onChange:e=>{const t=e.map((e=>{var t;return null===(t=i[e])||void 0===t?void 0:t.id}));t.includes(void 0)||a(t)}}):null},u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"advanced-posts-blocks/posts","apiVersion":2,"title":"Multiple Posts","description":"Display multiple posts.","icon":"admin-post","textdomain":"advanced-posts-blocks","attributes":{"align":{"type":"string","enum":["center","wide","full"]},"postType":{"type":"string","default":"post"},"postsToShow":{"type":"number","default":5},"offset":{"type":"number","default":0},"order":{"type":"string","default":"desc"},"orderBy":{"type":"string","default":"date"},"ignoreStickyPosts":{"type":"boolean","default":true},"showAllPosts":{"type":"boolean","default":false}},"supports":{"align":["center","wide","full"],"html":false},"category":"widgets","editorScript":"file:./index.js"}'),m=e=>e.flatMap((e=>e?e.split(" "):[])),g=window.wp.serverSideRender;var b=e.n(g);function y(e){let{title:o,children:s}=e;return(0,t.createElement)(l.Placeholder,{label:o},s)}const h=(0,t.memo)((e=>{let{name:o,attributes:s,title:n,emptyResponseLabel:a}=e;return(0,t.createElement)(b(),{block:o,attributes:s,LoadingResponsePlaceholder:()=>(0,t.createElement)(y,null,(0,t.createElement)(l.Spinner,null)),EmptyResponsePlaceholder:()=>(0,t.createElement)(y,{title:n},a)})})),v=h,{name:f,title:k}=u,{name:w,supports:_,category:C}=u,P=(0,s.__)("Multiple Posts","advanced-posts-blocks");(0,o.registerBlockType)(w,{supports:_,category:C,title:`${P} (Advanced Posts Blocks)`,description:(0,s.__)("Display multiple posts.","advanced-posts-blocks"),keywords:["multiple posts",(0,s.__)("multiple posts","advanced-posts-blocks")],icon:(0,t.createElement)(l.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(l.Path,{d:"M20 4V16H22V2H8V4H20Z",fill:"currentColor"}),(0,t.createElement)(l.Path,{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 8V22H16V8H2ZM14 10H4V20H14V10Z",fill:"currentColor"}),(0,t.createElement)(l.Path,{d:"M17 7H5V5H19V19H17V7Z",fill:"currentColor"})),edit:e=>{let{attributes:a,setAttributes:r}=e;const{postsToShow:g,order:b,orderBy:y,postType:h,offset:w,ignoreStickyPosts:_,showAllPosts:C,className:P}=a,E=(S=h,(0,d.useSelect)((e=>e("core").getPostType(S)||{}),[S]));var S;const O=(e=>(0,d.useSelect)((t=>(t("core").getTaxonomies({per_page:-1})||[]).filter((t=>(e.taxonomies||[]).includes(t.slug)))),[e]))(E),B=E.labels||{},T=O.map(((e,o)=>{var l,s,n;const c=null!==(l=null!==(s=null===(n=a[e.rest_base])||void 0===n?void 0:n.terms)&&void 0!==s?s:a[e.rest_base])&&void 0!==l?l:[];return(0,t.createElement)(p,{key:o,taxonomy:e,termIds:c,handleChange:t=>{r({[e.rest_base]:{terms:t}})}})})),x=(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:(0,s.__)("Query setting","advanced-posts-blocks")},(0,t.createElement)(i,{value:E,onChange:e=>{null!=e&&e.supports["page-attributes"]||"menu_order"!==y||r({orderBy:u.attributes.orderBy.default}),r({postType:e.slug})}}),T,(0,t.createElement)(c,{order:b,orderBy:y,offset:w,ignoreStickyPosts:_,showAllPosts:C,postType:E,numberOfItems:g,onOffsetChange:e=>r({offset:e}),onOrderChange:e=>r({order:e}),onOrderByChange:e=>r({orderBy:e}),onNumberOfItemsChange:e=>r({postsToShow:e}),onIgnoreStickyPostsChange:e=>r({ignoreStickyPosts:e}),onshowAllPostsChange:e=>{r({showAllPosts:e})}}))),I=(0,o.getBlockDefaultClassName)(f),V=function(e){const t=m(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]),{className:o}=e,l=o?o.split(" "):[];return{...e,className:l.filter((e=>!t.includes(e))).join(" ")}}((0,n.useBlockProps)(),[I,P]);return(0,t.createElement)("div",V,x,(0,t.createElement)(l.Disabled,null,(0,t.createElement)(v,{name:f,attributes:a,title:k,emptyResponseLabel:B.not_found})))},save:()=>null})})();